<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <!-- Meta Pixel Code -->
  <script>
  !function(f,b,e,v,n,t,s)
  {if(f.fbq)return;n=f.fbq=function(){n.callMethod?
  n.callMethod.apply(n,arguments):n.queue.push(arguments)};
  if(!f._fbq)f._fbq=n;n.push=n;n.loaded=!0;n.version='2.0';
  n.queue=[];t=b.createElement(e);t.async=!0;
  t.src=v;s=b.getElementsByTagName(e)[0];
  s.parentNode.insertBefore(t,s)}(window, document,'script',
  'https://connect.facebook.net/en_US/fbevents.js');
  fbq('init', '892538199809242');
  fbq('track', 'PageView');
  </script>
  <noscript><img height="1" width="1" style="display:none"
  src="https://www.facebook.com/tr?id=892538199809242&ev=PageView&noscript=1"
  /></noscript>
  <!-- End Meta Pixel Code -->
  <!-- Google Tag Manager -->
  <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
  new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
  j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
  'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
  })(window,document,'script','dataLayer','GTM-N4P472B5');</script>
  <!-- End Google Tag Manager -->
  <title>Attune &mdash; Daily Health Insights, Right From Your Bathroom</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      theme: {
        extend: {
          fontFamily: {
            sans: ['Inter', 'system-ui', 'Segoe UI', 'sans-serif'],
          },
          colors: {
            brand: {
              blue: '#0ea5e9',
              teal: '#22c55e',
              deep: '#0f172a',
              green: '#34d399',
            },
          },
        },
      },
    };
  </script>
</head>
<body class="bg-slate-950 text-slate-50 antialiased font-sans relative overflow-x-hidden">
  <!-- Google Tag Manager (noscript) -->
  <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-N4P472B5"
  height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
  <!-- End Google Tag Manager (noscript) -->
  <div class="pointer-events-none absolute inset-0">
    <div class="absolute inset-0 bg-gradient-to-br from-sky-500/20 via-slate-900 to-emerald-500/15 blur-3xl"></div>
    <div class="absolute inset-0 bg-[radial-gradient(circle_at_20%_20%,rgba(255,255,255,0.05),transparent_35%),radial-gradient(circle_at_80%_10%,rgba(14,165,233,0.08),transparent_30%)]"></div>
  </div>

  <!-- Hero -->
  <div class="relative">
    <div class="relative mx-auto max-w-6xl px-6 pb-16 pt-8 sm:pt-12 lg:pt-16">
      <header class="flex items-center justify-between">
        <div class="text-2xl font-semibold tracking-tight text-white">Attune</div>
        <a href="#waitlist" class="inline-flex items-center rounded-full bg-white px-5 py-2 text-sm font-semibold text-slate-900 shadow-md transition hover:shadow-lg">Join the waitlist</a>
      </header>
      <div class="mt-12 grid items-center gap-10 lg:grid-cols-[1fr,0.9fr]">
        <div class="space-y-6">
          <h1 class="text-4xl sm:text-5xl lg:text-6xl font-bold leading-tight text-white">Daily Health Insights, Right From Your Bathroom</h1>
          <p class="text-lg font-semibold text-white/90" data-price-hero>Early access pricing</p>
          <p class="text-lg text-white/80 max-w-2xl">Your body already knows what's going on. Attune helps you listen. Attune passively tracks hydration, recovery, and metabolic state through your urine&mdash;no wearables, no appointments, no manual logs. Get simple, actionable feedback that helps you improve your health and avoid preventable setbacks.</p>
          <div class="flex flex-wrap gap-3">
            <a href="#waitlist" class="inline-flex items-center rounded-full bg-white px-6 py-3 text-sm font-semibold text-slate-900 shadow-md transition hover:shadow-lg">Join the waitlist</a>
            <a href="#how-it-works" class="inline-flex items-center rounded-full bg-white/10 px-6 py-3 text-sm font-semibold text-white transition hover:bg-white/20 border border-white/20">Learn more</a>
          </div>
        </div>
        <div class="relative flex justify-center">
          <div class="absolute -inset-10 sm:-inset-12 bg-gradient-to-br from-sky-500/30 via-sky-400/10 to-transparent blur-3xl opacity-80"></div>
          <img src="./Attune_app_insights.png" alt="Attune app insights" class="relative w-full max-w-md drop-shadow-[0_25px_60px_rgba(0,0,0,0.45)]">
        </div>
      </div>
    </div>
  </div>

  <main class="relative mx-auto max-w-6xl px-6 pb-20 space-y-12">
    <!-- What this helps you do -->
    <section class="mt-6 rounded-[32px] bg-slate-900/70 px-6 py-10 ring-1 ring-white/10 shadow-xl backdrop-blur">
      <h2 class="text-3xl font-semibold text-white text-center">What this helps you do every day</h2>
      <div class="mt-8 grid gap-5 md:grid-cols-3">
        <div class="rounded-2xl bg-white/5 p-6 shadow-sm ring-1 ring-white/10 text-center">
          <div class="mx-auto mb-4 h-12 w-12 rounded-full bg-sky-500/20 flex items-center justify-center text-sky-300 text-2xl">ðŸ’§</div>
          <h3 class="text-lg font-semibold text-white">Stay hydrated</h3>
          <p class="mt-3 text-white/70">Measure urine specific gravity to spot dehydration early.</p>
        </div>
        <div class="rounded-2xl bg-white/5 p-6 shadow-sm ring-1 ring-white/10 text-center">
          <div class="mx-auto mb-4 h-12 w-12 rounded-full bg-emerald-500/20 flex items-center justify-center text-emerald-300 text-2xl">âŸ³</div>
          <h3 class="text-lg font-semibold text-white">Optimize recovery</h3>
          <p class="mt-3 text-white/70">Track recovery markers in your urine to avoid overtraining.</p>
        </div>
        <div class="rounded-2xl bg-white/5 p-6 shadow-sm ring-1 ring-white/10 text-center">
          <div class="mx-auto mb-4 h-12 w-12 rounded-full bg-teal-500/20 flex items-center justify-center text-teal-200 text-2xl">âš›</div>
          <h3 class="text-lg font-semibold text-white">Monitor your metabolism</h3>
          <p class="mt-3 text-white/70">Follow ketones and electrolytes to see how your diet is working.</p>
        </div>
      </div>
    </section>

    <!-- How it works -->
    <section id="how-it-works" class="rounded-[28px] bg-slate-900/70 p-8 ring-1 ring-white/10 shadow-xl backdrop-blur">
      <h2 class="text-3xl font-semibold text-white">How it works</h2>
      <div class="mt-6 grid gap-4 md:grid-cols-2 lg:grid-cols-4">
        <div class="rounded-xl bg-white/5 p-5 shadow-sm ring-1 ring-white/10">
          <p class="text-sm font-semibold uppercase tracking-wide text-white/70">Step 1</p>
          <p class="mt-2 text-white">You go, it measures &mdash; passive urine analysis each visit.</p>
        </div>
        <div class="rounded-xl bg-white/5 p-5 shadow-sm ring-1 ring-white/10">
          <p class="text-sm font-semibold uppercase tracking-wide text-white/70">Step 2</p>
          <p class="mt-2 text-white">Hydration, recovery, and metabolic markers are detected.</p>
        </div>
        <div class="rounded-xl bg-white/5 p-5 shadow-sm ring-1 ring-white/10">
          <p class="text-sm font-semibold uppercase tracking-wide text-white/70">Step 3</p>
          <p class="mt-2 text-white">Insights are delivered automatically to your app.</p>
        </div>
        <div class="rounded-xl bg-white/5 p-5 shadow-sm ring-1 ring-white/10">
          <p class="text-sm font-semibold uppercase tracking-wide text-white/70">Step 4</p>
          <p class="mt-2 text-white">You adjust in real time.</p>
        </div>
      </div>
    </section>

    <!-- Who it's for -->
    <section class="rounded-[28px] bg-slate-900/70 p-8 ring-1 ring-white/10 shadow-xl backdrop-blur">
      <h2 class="text-3xl font-semibold text-white">Who it's for</h2>
      <p class="mt-4 text-white/70">Designed for people who push their bodies and care about their internal signals.</p>
      <div class="mt-6 flex flex-wrap gap-3">
        <span class="rounded-full bg-white/10 px-4 py-2 text-sm font-semibold text-white shadow-sm ring-1 ring-white/15">Athletes</span>
        <span class="rounded-full bg-white/10 px-4 py-2 text-sm font-semibold text-white shadow-sm ring-1 ring-white/15">Runners & cyclists</span>
        <span class="rounded-full bg-white/10 px-4 py-2 text-sm font-semibold text-white shadow-sm ring-1 ring-white/15">Gym-goers</span>
        <span class="rounded-full bg-white/10 px-4 py-2 text-sm font-semibold text-white shadow-sm ring-1 ring-white/15">Health-minded folks</span>
        <span class="rounded-full bg-white/10 px-4 py-2 text-sm font-semibold text-white shadow-sm ring-1 ring-white/15">Biohackers</span>
      </div>
    </section>

    <!-- Waitlist CTA -->
    <section id="waitlist" class="rounded-[32px] bg-gradient-to-r from-sky-600/60 via-sky-500/50 to-emerald-500/60 p-8 shadow-2xl ring-1 ring-white/15 backdrop-blur">
      <div class="flex flex-col gap-6 lg:flex-row lg:items-center lg:justify-between">
        <div class="space-y-2">
          <p class="text-sm font-semibold uppercase tracking-wide text-white/90">Join the waitlist</p>
          <h3 class="text-3xl font-semibold text-white">Be first to get Attune</h3>
          <p class="text-white/90">Early access, special pricing, and beta invitations.</p>
          <p class="text-sm font-semibold text-white/90" data-price-cta>Early access pricing</p>
        </div>
        <form id="waitlist-form" class="flex w-full flex-col gap-3 sm:flex-row sm:items-center lg:w-auto">
          <input type="email" name="email" required placeholder="you@example.com" class="w-full rounded-full border border-white/40 bg-white/20 px-4 py-3 text-white placeholder:text-white/70 focus:border-white focus:outline-none focus:ring-2 focus:ring-white/60 sm:w-64">
          <input type="text" name="_gotcha" autocomplete="off" tabindex="-1" class="hidden">
          <button type="submit" class="inline-flex items-center justify-center rounded-full bg-white px-6 py-3 text-sm font-semibold text-slate-900 shadow transition hover:shadow-md">Join the waitlist</button>
        </form>
      </div>
    </section>

    <!-- FAQ -->
    <section class="rounded-[28px] bg-slate-900/70 p-8 ring-1 ring-white/10 shadow-xl backdrop-blur">
      <h2 class="text-3xl font-semibold text-white">FAQ</h2>
      <div class="mt-6 grid gap-4 md:grid-cols-2">
        <div class="rounded-xl bg-white/5 p-5 shadow-sm ring-1 ring-white/10">
          <h4 class="text-lg font-semibold text-white">Is this sanitary?</h4>
          <p class="mt-2 text-white/70">Yes. Analysis is non-contact and fully enclosed.</p>
        </div>
        <div class="rounded-xl bg-white/5 p-5 shadow-sm ring-1 ring-white/10">
          <h4 class="text-lg font-semibold text-white">Does it replace my wearables?</h4>
          <p class="mt-2 text-white/70">It complements them by measuring internal biomarkers they cannot.</p>
        </div>
        <div class="rounded-xl bg-white/5 p-5 shadow-sm ring-1 ring-white/10">
          <h4 class="text-lg font-semibold text-white">What biomarkers do you track?</h4>
          <p class="mt-2 text-white/70">Hydration, recovery markers, metabolic indicators like ketones and electrolytes.</p>
        </div>
        <div class="rounded-xl bg-white/5 p-5 shadow-sm ring-1 ring-white/10">
          <h4 class="text-lg font-semibold text-white">Does it work with any toilet?</h4>
          <p class="mt-2 text-white/70">A retrofit version is planned; early units may require compatible hardware.</p>
        </div>
        <div class="rounded-xl bg-white/5 p-5 shadow-sm ring-1 ring-white/10">
          <h4 class="text-lg font-semibold text-white">When will it be available?</h4>
          <p class="mt-2 text-white/70">We're selecting early testers now.</p>
        </div>
      </div>
    </section>
  </main>

  <script>
    const WAITLIST_ENDPOINT = 'https://usebasin.com/f/a31af0c903bc';
    const ALLOWED_PRICES = [9, 19, 39, 79];
    const DEFAULT_PRICE = null;
    const UTM_KEYS = ['utm_source', 'utm_medium', 'utm_campaign', 'utm_content', 'utm_term', 'utm_ad'];

    /*
      Test plan:
      1) Visit /join?price=39&utm_source=meta&utm_campaign=pricing_test_v1&utm_ad=ad_a
         - Price appears in hero + CTA
         - Payload includes price_shown=39 and UTMs
      2) Visit /join?price=999
         - Shows "Early access pricing"
         - price_shown stored as null
      3) Submit signup and confirm:
         - Server receives/stores price_shown + UTMs
         - Analytics event fires with correct properties
    */

    const getCookie = (name) => {
      const match = document.cookie.match(new RegExp(`(?:^|; )${name}=([^;]*)`));
      return match ? decodeURIComponent(match[1]) : null;
    };

    const setSessionValue = (key, value) => {
      const safeValue = value === null ? '' : String(value);
      try {
        document.cookie = `${key}=${encodeURIComponent(safeValue)}; path=/; SameSite=Lax`;
      } catch (error) {
        // Cookie write failed; fall back to localStorage only.
      }
      try {
        localStorage.setItem(key, safeValue);
      } catch (error) {
        // localStorage not available.
      }
    };

    const getSessionValue = (key) => {
      const cookieValue = getCookie(key);
      if (cookieValue !== null) {
        return cookieValue;
      }
      try {
        return localStorage.getItem(key);
      } catch (error) {
        return null;
      }
    };

    const resolvePriceShown = (params) => {
      let priceShown = DEFAULT_PRICE;
      if (params.has('price')) {
        const raw = params.get('price');
        const parsed = raw === null ? NaN : Number(raw);
        priceShown = ALLOWED_PRICES.includes(parsed) ? parsed : DEFAULT_PRICE;
      } else {
        const stored = getSessionValue('price_shown');
        const parsedStored = stored === null || stored === '' ? DEFAULT_PRICE : Number(stored);
        priceShown = ALLOWED_PRICES.includes(parsedStored) ? parsedStored : DEFAULT_PRICE;
      }
      setSessionValue('price_shown', priceShown);
      return priceShown;
    };

    const resolveUtmValues = (params) => {
      const utms = {};
      UTM_KEYS.forEach((key) => {
        if (params.has(key)) {
          const value = params.get(key);
          const normalized = value ? value.trim() : '';
          utms[key] = normalized || null;
          setSessionValue(key, utms[key]);
        } else {
          const stored = getSessionValue(key);
          utms[key] = stored === null || stored === '' ? null : stored;
        }
      });
      return utms;
    };

    const formatHeroPrice = (priceShown) => {
      if (priceShown === null) return 'Early access pricing';
      return `Early access: $${priceShown}/month`;
    };

    const formatCtaPrice = (priceShown) => {
      if (priceShown === null) return 'Join for early access pricing';
      return `Join for $${priceShown}/month`;
    };

    const updatePriceCopy = (priceShown) => {
      const hero = document.querySelector('[data-price-hero]');
      if (hero) hero.textContent = formatHeroPrice(priceShown);
      const cta = document.querySelector('[data-price-cta]');
      if (cta) cta.textContent = formatHeroPrice(priceShown);
    };

    const isDev = ['localhost', '127.0.0.1'].includes(window.location.hostname);
    const trackAnalyticsEvent = (name, properties) => {
      if (Array.isArray(window.dataLayer)) {
        window.dataLayer.push({ event: name, ...properties });
        return;
      }
      if (typeof window.gtag === 'function') {
        window.gtag('event', name, properties);
        return;
      }
      if (window.analytics && typeof window.analytics.track === 'function') {
        window.analytics.track(name, properties);
        return;
      }
      if (isDev) return;
    };

    let pricingState = { priceShown: DEFAULT_PRICE, utms: {} };

    const applyPricingFromUrl = () => {
      const params = new URLSearchParams(window.location.search);
      const priceShown = resolvePriceShown(params);
      const utms = resolveUtmValues(params);
      pricingState = { priceShown, utms };
      updatePriceCopy(priceShown);
    };

    applyPricingFromUrl();

    window.addEventListener('popstate', () => {
      applyPricingFromUrl();
    });

    const originalPushState = history.pushState;
    history.pushState = function () {
      originalPushState.apply(this, arguments);
      applyPricingFromUrl();
    };

    const originalReplaceState = history.replaceState;
    history.replaceState = function () {
      originalReplaceState.apply(this, arguments);
      applyPricingFromUrl();
    };

    const waitlistForm = document.getElementById('waitlist-form');
    if (waitlistForm) {
      waitlistForm.addEventListener('submit', async (event) => {
        event.preventDefault();
        const emailInput = waitlistForm.querySelector('input[name="email"]');
        const honeypot = waitlistForm.querySelector('input[name="_gotcha"]');
        const email = emailInput ? emailInput.value.trim() : '';
        const isSpam = honeypot && honeypot.value;
        if (!email || isSpam) return;

        try {
          const response = await fetch(WAITLIST_ENDPOINT, {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify({
              email,
              price_shown: pricingState.priceShown,
              utm_source: pricingState.utms.utm_source || null,
              utm_medium: pricingState.utms.utm_medium || null,
              utm_campaign: pricingState.utms.utm_campaign || null,
              utm_content: pricingState.utms.utm_content || null,
              utm_term: pricingState.utms.utm_term || null,
              utm_ad: pricingState.utms.utm_ad || null,
              landing_path: window.location.pathname,
              full_url: window.location.href,
            }),
          });

          if (response.ok) {
            trackAnalyticsEvent('waitlist_signup', {
              price_shown: pricingState.priceShown,
              page_path: window.location.pathname,
              ...pricingState.utms,
            });
            window.location.href = '/waitlist-confirmed/';
            return;
          }
          alert('Waitlist is full right now-email us at hello@attune.com.');
        } catch (error) {
          alert('Network hiccup-please try again.');
        } finally {
          waitlistForm.reset();
        }
      });
    }
  </script>
</body>
</html>
